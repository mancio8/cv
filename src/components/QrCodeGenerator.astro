<div class="flex justify-center mt-10">
  <div class="card w-full max-w-md bg-base-100 shadow-xl">
    <div class="card-body text-center">

      <!-- Titolo -->
      <h2 class="card-title justify-center text-xl">
        ðŸ“± Genera QR Code
      </h2>
      <p class="text-base-content/70 mb-4">
        Inserisci un link o un testo e genera il QR Code
      </p>

      <!-- Input testo/link -->
      <input
        id="input-text"
        type="text"
        placeholder="Inserisci il link o il testo"
        class="input input-bordered input-primary w-ful mb-4 text-center"
      />

      <!-- Bottone genera QR -->
      <div class="card-actions justify-center mt-4">
         <button
          id="generate"
          class="btn btn-primary btn-wide mb-4"
        >
          Genera QR Code
        </button>
      </div>
     

      <!-- QR Code display -->
      <div
        id="qrcode-container"
        class="bg-base-200 p-4 rounded-lg flex justify-center items-center min-h-[150px]"
      >
        <span class="text-sm text-base-content/70">Il QR Code apparirÃ  qui</span>
      </div>

    </div>
  </div>
</div>

<script>
  import QRCode from "qrcode";
  document.addEventListener("DOMContentLoaded", function () {
    const generateButton = document.getElementById("generate");
    const qrCodeContainer = document.getElementById("qrcode-container");
    const inputField = document.getElementById(
      "input-text"
    ) as HTMLInputElement; // Cast a HTMLInputElement

    if (generateButton && qrCodeContainer && inputField) {
      generateButton.addEventListener("click", async function () {
        const inputValue = inputField.value; // Ora `value` esiste su HTMLInputElement
        if (inputValue) {
          try {
            const qrCodeUrl = await QRCode.toDataURL(inputValue);
            qrCodeContainer.innerHTML = `<img src="${qrCodeUrl}" alt="QR Code">`;
          } catch (error) {
            console.error("Errore durante la generazione del QR Code:", error);
          }
        }
      });
    }
  });
</script>
