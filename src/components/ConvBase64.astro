<div class="flex justify-center mt-10">
  <div class="card w-full max-w-lg bg-base-100 shadow-xl">
    <div class="card-body text-center">

      <!-- Titolo -->
      <h2 class="card-title justify-center text-xl">
        üìù Convertitore Base64
      </h2>
      <p class="text-base-content/70 mb-4">
        Inserisci il Base64 qui sotto e converti in immagine o PDF
      </p>

      <!-- Textarea Base64 -->
      <textarea
        id="base64-input"
        rows="8"
        placeholder="Inserisci il Base64 qui..."
        class="textarea textarea-primary w-full mb-4 resize-none"
      ></textarea>

      <!-- Bottoni -->
      <div class="flex flex-col sm:flex-row justify-center gap-4 mb-4">
        <button
          id="convert-image-button"
          class="btn btn-primary w-full sm:w-auto"
        >
          Converti in Immagine
        </button>
        <button
          id="convert-pdf-button"
          class="btn btn-secondary w-full sm:w-auto"
        >
          Converti in PDF
        </button>
      </div>

      <!-- Container output -->
      <div
        id="output-container"
        class="bg-base-200 rounded-lg p-4 min-h-[150px] flex justify-center items-center"
      >
        <span class="text-base-content/70">L‚Äôoutput apparir√† qui</span>
      </div>

    </div>
  </div>
</div>


<script>
  // Funzione per convertire Base64 in un'immagine
  function convertBase64ToImage(base64: string) {
    const outputContainer = document.getElementById("output-container");

    if (outputContainer) {
      // Crea un elemento <img> per visualizzare l'immagine
      const imgElement = document.createElement("img");
      imgElement.src = `data:image/jpeg;base64,${base64}`;
      imgElement.alt = "Immagine decodificata da Base64";

      // Pulisce il contenuto precedente e aggiunge la nuova immagine
      outputContainer.innerHTML = "";
      outputContainer.appendChild(imgElement);
    }
  }

  // Funzione per convertire Base64 in un PDF
  function convertBase64ToPDF(base64: string) {
    const outputContainer = document.getElementById("output-container");

    if (outputContainer) {
      // Crea un elemento <iframe> per visualizzare il PDF
      const pdfElement = document.createElement("iframe");
      pdfElement.src = `data:application/pdf;base64,${base64}`;
      pdfElement.width = "100%";
      pdfElement.height = "600px";

      // Pulisce il contenuto precedente e aggiunge il PDF
      outputContainer.innerHTML = "";
      outputContainer.appendChild(pdfElement);
    }
  }

  // Event listener per il pulsante di conversione immagine
  document
    .getElementById("convert-image-button")
    ?.addEventListener("click", () => {
      const base64Input = document.getElementById(
        "base64-input"
      ) as HTMLTextAreaElement;
      const base64Value = base64Input.value.trim();

      if (base64Value) {
        convertBase64ToImage(base64Value);
      }
    });

  // Event listener per il pulsante di conversione PDF
  document
    .getElementById("convert-pdf-button")
    ?.addEventListener("click", () => {
      const base64Input = document.getElementById(
        "base64-input"
      ) as HTMLTextAreaElement;
      const base64Value = base64Input.value.trim();

      if (base64Value) {
        convertBase64ToPDF(base64Value);
      }
    });
</script>
