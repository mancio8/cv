---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import QRCodeGenerator from "../components/QrCodeGenerator.astro";
import GenPass from "../components/GenPass.astro";
import TestaCroce from "../components/TestaCorce.astro";
import ConvBase64 from "../components/ConvBase64.astro";
import DiffDate from "../components/DiffDate.astro";
import NextRace from '../components/NextRace.astro';
import LastRaceResults from '../components/LastRaceResults.astro';
import DriverStandings from '../components/DriverStandings.astro';
import ConstructorStandings from '../components/ConstructorStandings.astro'


import StatsComponent from '../components/DriverInfo.astro'
import { getDriverInfo, getDriverStats } from '../services/f1Service';

// Array di ID dei piloti
const driverIds = ['max_verstappen', 'hamilton', 'leclerc', 'norris', 'sainz', 'piastri'];

const driversData = await Promise.all(driverIds.map(async (driverId) => {
    const driverInfo = await getDriverInfo(driverId);
    const driverStats = await getDriverStats(driverId); // Usa la versione per la stagione 2024
    return {
        driverData: driverInfo,
        driverStats: driverStats
    };
}));

---

<BaseLayout sideBarActiveItemID="utility">
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" checked="checked" />
    <div class="collapse-title text-xl font-medium">Generatore di QR Code</div>
    <div class="collapse-content">
      <QRCodeGenerator />
      
    </div>
  </div>
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" />
    <div class="collapse-title text-xl font-medium">
      Generatore di Password Sicure
    </div>

    <div class="collapse-content">
      <GenPass />
      
    </div>
  </div>
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" />
    <div class="collapse-title text-xl font-medium">Gioco Testa o Croce</div>
    <div class="collapse-content">
      <TestaCroce />
      
    </div>
  </div>
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" />
    <div class="collapse-title text-xl font-medium">
      Converti Base64 in Immagine o PDF
    </div>
    <div class="collapse-content">
      <ConvBase64/>
    </div>
  </div>
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" />
    <div class="collapse-title text-xl font-medium">
      Calcolatore di Differenza tra Date
    </div>
    <div class="collapse-content">
      <DiffDate/>
    </div>
  </div>
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" />
    <div class="collapse-title text-xl font-medium">
      F1
    </div>
    <div class="collapse-content">
      <!--inizio component-->
      <NextRace />
      <LastRaceResults />
      <!--fine component -->
    </div>
  </div>
  <div class="collapse collapse-arrow bg-base-200">
    <input type="radio" name="my-accordion-2" />
    <div class="collapse-title text-xl font-medium">
      Statistiche piloti F1
    </div>
    <div class="collapse-content">
      <!--inizio component-->
      <div class="row">
        {driversData.map(({ driverData, driverStats }) => (
          <div class="w-full mb-4">
            <StatsComponent driverData={driverData} driverStats={driverStats} />
          </div>
        ))}
      </div>
      
      <!--fine component -->
    </div>
  </div>

 
  


</BaseLayout>

